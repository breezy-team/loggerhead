<tal:block>
  <ul tal:repeat="added entry/changes/added">
    <tal:block condition="repeat/added/start">
      <li class="desc">files added:</li>
    </tal:block>
    <li class="files"
        tal:define="filename python:added[0];
                    file_id  python:added[1]">
      <tal:revision content="structure python:file_link(filename)" />
    </li>
  </ul>

  <ul tal:repeat="removed entry/changes/removed">
    <tal:block condition="repeat/removed/start">
      <li class="desc">files removed:</li>
    </tal:block>
    <li class="files"
        tal:define="filename python:removed[0];
                    file_id  python:removed[1]">
      <tal:revision content="structure python:file_link(filename)" />
    </li>
  </ul>

  <ul tal:repeat="renamed entry/changes/renamed">
    <tal:block condition="repeat/renamed/start">
      <li class="desc">files renamed:</li>
    </tal:block>
    <li class="files"
        tal:define="old_filename  python:renamed[0];
                    new_filename  python:renamed[1];
                    file_id       python:renamed[2];
                    text_modified python:renamed[3]">
      <tal:old-name content="old_filename" class="filename">
        old_filename
      </tal:old-name>
      =&gt;
      <tal:revision condition="text_modified" content="structure python:file_link(new_filename)" />
      <tal:old-name condition="not:text_modified" content="new_filename" class="filename">
        new_filename
      </tal:old-name>
    </li>
  </ul>

  <ul tal:repeat="item entry/changes/modified">
    <tal:block condition="repeat/item/start">
      <li class="desc">files modified:</li>
    </tal:block>
    <li class="files">
      <tal:revision content="structure python:file_link(item.filename)" />
    </li>
  </ul>
</tal:block>
