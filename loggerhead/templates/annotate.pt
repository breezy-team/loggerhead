<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" metal:use-macro="macros/main">
  <head>
    <title metal:fill-slot="title"
           tal:content="string:${branch/friendly_name} : contents of ${path}
                        at revision ${change/revno}">
    </title>
    <metal:block fill-slot="header_extras">
        <link rel="stylesheet" type="text/css" media="all"
              tal:attributes="href python:branch.static_url('/static/css/annotate.css')"/>
    </metal:block>
  </head>

  <body>

    <h1 metal:fill-slot="heading">
      <tal:has-link condition="branch/branch_link">
        <a tal:attributes="href branch/branch_link"
           tal:content="branch/friendly_name">
          nice/branch/name
        </a>
      </tal:has-link>
      <tal:no-link condition="not: branch/branch_link">
        <span metal:use-macro="breadcrumbs/directory"></span>
      </tal:no-link>
      <span>: <span metal:use-macro="breadcrumbs/branch" /> (revision <tal:revno content="change/revno"></tal:revno>)</span>
    </h1>

    <div metal:fill-slot="content">
        <ul id="submenuTabs">
            <li id="first">
                <a tal:attributes="href python:url(['/files', change.revno], clear=1)">browse files</a>
            </li>
            <li>
                <a tal:attributes="href python:url(['/revision'], clear=1, start_revid=change.revno)">view revision</a>
            </li>
            <li>
                <a tal:attributes="href python:url(['/changes'], clear=1, 
                                    start_revid=change.revno, filter_file_id=file_id)"
                >view changes to this file</a>
            </li>
            <li id="last">
                <a tal:attributes="href python:url(['/download',
                                    revno_url, file_id, filename])"
                >download file</a>
            </li>
        </ul>

      <div class="annotate">
        <table id="logentries">
          <tr class="logheader">
            <td class="annoLineTit">Line</td>
            <td class="annoRevTit">Revision</td>
            <td class="annoContTit">Contents</td>
          </tr>

          <tr tal:repeat="line contents" 
              tal:attributes="class string:blueRow${line/parity}">
            <td class="annoLine" tal:content="line/lineno">1</td>
            <td class="annoRev">
              <a tal:condition="python:line.status=='changed'"
                 tal:content="python:util.trunc(line.change.revno)"
                 tal:attributes="href python:url(['/revision'], clear=1, start_revid=line.change.revno, filter_file_id=file_id);
                                 title python:'%s by %s, on %s (%s)'%(line.change.revno, util.hide_email(line.change.author), line.change.date.strftime('%d %b %Y %H:%M'), util.date_time(line.change.date))"></a>
            </td>
            <td class="annoCont" tal:content="line/text"></td>
          </tr>
        </table>
      </div>

    </div>
  </body>
</html>
