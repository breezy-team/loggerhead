<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" metal:use-macro="macros/main">
  <head>
    <title metal:fill-slot="title"
           tal:content="string:${branch/friendly_name} : files for revision ${change/revno}">
      ${branch.friendly_name} : files for revision ${change.revno}
    </title>
  </head>
  <body>

    <h1 metal:fill-slot="heading">
      <span class="branch-name" tal:content="branch/friendly_name">
        ${branch.friendly_name}
      </span>
      : files for revision
      <tal:revno content="change/revno">
        ${change.revno}
      </tal:revno>
    </h1>

    <div metal:fill-slot="content">
      <div class="links">
        <div> <b>&#8594;</b> <a tal:attributes="href python:url(['/revision', change.revno])">
	    view revision </a>
        </div>
        <div> <b>&#8594;</b> <a tal:attributes="href python:url(['/changes', change.revno])">
	    view branch changes </a>
        </div>
      </div>

      <tal:revision-info replace="structure python:revisioninfo(url, branch, change)" />

      <div class="inventory-path">
        <b>folder:</b> <span class="folder" tal:content="path"> ${path} </span>
      </div>

      <table class="inventory" width="100%">
        <tr class="header">
          <th class="permissions">
            Permissions
          </th>
          <th>
            <a tal:attributes="href python:url(['/files', revid], sort='filename')">Filename</a>
          </th>
          <th>
            Latest Rev
          </th>
          <th>
            <a tal:attributes="href python:url(['/files', revid], sort='date')">Last Changed</a>
          </th>
          <th>
            <a tal:attributes="href python:url(['/files', revid], sort='size')">Size</a>
          </th>
          <th>
          </th>
          <th>
          </th>
        </tr>

        <tr class="parity1" tal:condition="python:updir">
          <td class="permissions">drwxr-xr-x</td>
          <td class="filename directory">
            <a tal:attributes="href python:url(['/files', revid], file_id=updir_file_id)">
              (up)
            </a>
          </td>
          <td>
          </td>
          <td>
          </td>
          <td>
          </td>
          <td>
          </td>
        </tr>

        <tr tal:repeat="file filelist"
            tal:attributes="class string:parity${file/parity}">
          <td class="permissions" tal:content="python:util.fake_permissions(file.kind, file.executable)">
            ${}
          </td>
          <td tal:attributes="class string:filename ${file/kind}">
            <a tal:condition="python:file.kind=='directory'"
               tal:attributes="href python:url(['/files', change.revno], file_id=file.file_id)"
               tal:content="string:${file/filename}/">
              ${file.filename}/
            </a>
            <span tal:condition="python:file.kind=='symlink'"
                  tal:content="string:${file/filename}@">
              ${file.filename}@
            </span>
            <a tal:condition="python:file.kind=='file'"
               tal:attributes="href python:url(['/annotate', change.revno], file_id=file.file_id);
                               title string:Annotate ${file/filename}"
               tal:content="string:${file/filename}">
              ${file.filename}
            </a>
          </td>
          <td class="revision">
            <a tal:attributes="href python:url(['/revision', file.change.revno], filter_file_id=file.file_id);
                               title string:Show revision ${file/change/revno}"
               tal:content="python:util.trunc(file.change.revno, 15)">
              ${text}
            </a>
          </td>
          <td class="date"
              tal:content="python:util.date_time(file.change.date)">
            ${}
          </td>
          <td class="size">
            <span tal:condition="python:file.kind=='file'"
                  tal:content="python:util.human_size(file.size)">
              ${util.human_size(file.size)}
            </span>
          </td>
          <td class="changes-link">
            <a tal:attributes="href python:url(['/changes'], start_revid=start_revid, filter_file_id=file.file_id);
                               title string:Changes affecting ${file/filename}">
              changes
            </a>
          </td>
          <td class="download-link">
            <a tal:condition="python:file.kind=='file'"
               tal:attributes="href python:url(['/download', file.revid, file.file_id, file.filename]);
                               title string:Download ${file/filename} at revision ${file/change/revno}">
              download
            </a>
          </td>
        </tr>
      </table>
    </div>

  </body>
</html>
