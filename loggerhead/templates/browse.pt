<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" metal:use-macro="macros/main">
  <head>
    <title metal:fill-slot="title">
      loggerhead branches
    </title>
  </head>

  <body>

    <h1 metal:fill-slot="heading" style="padding-bottom: 1em">
      <tal:title condition="title" content="title">
        ${title}
      </tal:title>
      <tal:no-title condition="not:title">
        bazaar branches in loggerhead
      </tal:no-title>
    </h1>

    <div metal:fill-slot="content">
      <div class="browse-project"
           tal:repeat="project projects">
        <div class="browse-project-name"
             tal:content="project/friendly_name">
          ${project.friendly_name}
        </div>

        <div class="browse-project-description"
             tal:condition="python:len(project.long_description) > 0"
             tal:content="structure project/long_description">
          ${XML(project.long_description)}
        </div>

        <div class="browse-view">
          <table>
            <tr class="heading">
              <th>
                Name
              </th>
              <th>
                Description
              </th>
              <th>
                Last change
              </th>
              <th />
            </tr>
            <tal:block repeat="view python:views_by_project[project]">
              <tr>
                <td class="name">
                  <a tal:attributes="href python:branch.static_url(project.name + '/' +  view.name)"
                     tal:content="view/friendly_name">
                    ${view.friendly_name}
                  </a>
                </td>
                <td class="description"
                    tal:content="view/description">
                  ${view.description}
                </td>
                <td class="last-update"
                    tal:content="python:view.get_history().has_revisions and util._approximatedate(view.last_updated()) or '(no revisions)'"></td>
                <td class="feed">
                  <a tal:attributes="href python:branch.static_url(project.name + '/' +  view.name + '/atom')"
                     title="atom feed">
                    <img tal:attributes="src python:branch.static_url('/static/images/feed-icon-16x16.gif')"
                         alt="atom feed" />
                  </a>
                </td>
              </tr>
              <tr tal:condition="view/branch_url">
                <td class="name">
                </td>
                <td class="description url" colspan="2">
                  <a tal:attributes="href view/branch_url"
                     tal:content="view/branch_url">
                    ${view.branch_url}
                  </a>
                </td>
              </tr>
            </tal:block>
          </table>
        </div>

      </div>
    </div>
  </body>
</html>
