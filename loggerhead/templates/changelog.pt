<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<tal:block define="onload string:sortCollapseElements()">
  <html xmlns="http://www.w3.org/1999/xhtml" metal:use-macro="macros/main">
    <head>
      <title metal:fill-slot="title"
             tal:content="string:${branch/friendly_name} : changes"></title>
      <metal:block fill-slot="header_extras">
        <link rel="alternate" type="application/atom+xml"
              tal:attributes="href python:url(['/atom']);
                              title string:RSS feed for ${branch/friendly_name}"
              />
      </metal:block>
    </head>

    <body>
        <h1 tal:content="string:${branch/friendly_name}"></h1>

        <tal:block condition="filter_file_id">
          to
          <span class="filename"
                tal:content="python:history.get_path(revid, filter_file_id)">
          </span>
        </tal:block>
        <tal:block condition="viewing_from">
          from <tal:block content="python:history.get_revno(start_revid)" />
        </tal:block>
        <tal:block condition="query">
          matching <tal:block content="query" />
        </tal:block>

      <div metal:fill-slot="content">

        <p tal:condition="search_failed">
          Sorry, no results found for your search.
        </p>

        <p tal:condition="not:changes">
          No revisions!
        </p>

        <p class="fr revnolink">Revision <a href="#" title="Show revision 165">165</a> to <a href="#" title="Show revision 174">174</a></p>
    	<p class="expand"><a href="#"><img src="https://edge.launchpad.net/@@/treeCollapsed" alt="expand all" /> expand all</a></p>
        <!-- Table -->        
        <table id="logentries"
               tal:define="subcolspan python:4-bool(all_same_author)">
          <tr class="logheader">
            <td class="revisionnumber">Rev</td>            
            <td class="expandcell">&nbsp;</td>
            <td class="summarycell">Summary</td>
            <td class="authorcell" tal:condition="not:all_same_author">Author</td>
            <td class="datecell">Date</td>
            <td class="diffcell">Diff</td>
            <td class="downloadcell">Files</td>
          </tr>
          <tal:block tal:repeat="entry changes">
            <a tal:attributes="name string:entry-${entry/revno}"/>
                <tr tal:attributes="class string:blueRow${entry/parity} revision_log">
                <td class="revnro revnolink"><a tal:attributes="title python:'Show revision '+entry.revno;
                                                                href  python:url(['/revision', entry.revno], clear=1)"
                   tal:content="python:util.trunc(entry.revno)">
                  text
                </a>
                </td>            
                <td class="expcell">
                    <div class="expand_revisioninfo">
                        <img src="https://launchpad.net/@@/treeCollapsed" alt="Expand Revision" />
                    </div>
                </td>
                <td class="summcell"><a tal:attributes="title python:'Show revision '+entry.revno;
                                                        href  python:url(['/revision', entry.revno], clear=1);
                                                        class string:link"
                                        tal:content="entry/short_comment"></a>
                                <div class="revisioninfo">
                                    <ul class="expandrev">
               	                        <li class="mergefrom" tal:repeat="parent python:entry.parents[1:]">
                                            <span class="revnolink">
                                                <a tal:attributes="href python:url(['/changes', parent.revno])"
                                                   tal:content="parent/revno"></a>
                                            </span>
                                            <a tal:attributes="href python:url(['/changes'], start_revid=parent.revno)"
                                               tal:content="python:'(' + parent.branch_nick + ')'"
                                                title="Show history" class="link"></a>
                                        </li>
                                        <li class="committerli" 
                                            tal:content="python:util.hide_email(entry.author)"></li>
                                        <tal:block content="structure python:file_change_summary(url, entry, modified_file_link_log)" />
                                    </ul>
                                </div>
                </td>
                <td tal:content="python:util.trunc(util.hide_email(entry.author), 20)"
                    class="autcell"></td>
                <td class="date">
                    <span tal:attributes="title python:util.date_time(entry.date)"
                          tal:content="python:util._approximatedate(entry.date)"></span>
                </td>
                <td class="diffr"><a tal:attributes="title python:'Show diff at revision '+entry.revno;
                                                     href href  python:url(['/revision', entry.revno], clear=1)">
                                  <img tal:attributes="src python:tg.url('/static/images/ico_diff.gif')" alt="Diff" /></a></td>
                <td class="downr"><a tal:attributes="href python:branch.url(['/files', entry.revno]);
                                                     title string:Files at revision ${entry/revno}">
                                   <img tal:attributes="src python:tg.url('/static/images/ico_file.gif');
                                                        alt string:Files" /></a>
                </td>
            </tr>
          </tal:block>

                  <!--<tr tal:repeat="merge_point entry/merge_points">
                    <th class="children">
                      <tal:block condition="repeat/merge_point/start">
                        merged in:
                      </tal:block>
                    </th>
                    <td class="children">
                      <a title="Show history"
                         tal:attributes="href python:url(['/changes'], start_revid=merge_point.revno)"
                         tal:content="python:revno_with_nick(merge_point)">
                        class="revlink">
                        ${text}
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <th class="description">
                      description:
                    </th>
                    <td class="description">
                      <tal:block repeat="line entry/comment_clean"
                                 content="structure string:${line}&lt;br /&gt;" />
                    </td>
                </tr>-->
        </table>

        <div tal:condition="python:navigation.prev_page_revid or navigation.next_page_revid"
             class="bar">
          <table>
            <tr>
              <td class="buttons">
                <a tal:condition="navigation/prev_page_revid"
                   tal:attributes="href navigation/prev_page_url">
                  &lt;&lt; page
                </a>
	      </td>
 	      <td class="rbuttons" align="right">
                <a tal:condition="navigation/next_page_revid"
                   tal:attributes="href navigation/next_page_url">
                  page &gt;&gt;
                </a>
 	      </td>
 	    </tr>
          </table>
        </div>
      </div>
    </body>
  </html>
</tal:block>
